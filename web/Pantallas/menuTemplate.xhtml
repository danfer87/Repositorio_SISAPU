<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="#{appBean.baseUrl}resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="#{appBean.baseUrl}resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <title>Menu Plantilla</title>
        <style type="text/css">
            html{
                height: 100%;
            }
            body{
                height: 80%;
            }
        </style>
    </h:head>

    <h:body>

        <div id="conteiner">
            <div id="top" >
                <ui:insert name="top"></ui:insert>
            </div >
            <div id="divSesionUsuario">
                <span>
                    <b>Sesion iniciada por:  </b>
                    <p:outputLabel value="#{loginBean.usuario.nombreUsu}  " style="text-align:right"/>
                    <p:outputLabel value=" #{loginBean.usuario.apellidoUsu}" style="text-align:right"/>
                    <br></br>
                    <b>Perfil:</b>
                    <p:outputLabel value="   #{loginBean.usuario.perfil.descripPerf}" style="text-align:right"/>
                </span>
            </div>            
            <div id="menu">
                <h:form id="frmMenu">  
                    <p:growl id="messages"/>  
                    <p:menubar autoDisplay="false">  

                        <p:submenu rendered="#{loginBean.usuario.perfil.modProyecto}" label=" Proyecto"  icon="icon-proyecto">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modProyectos}" icon="icon-nuevoproyecto" value="Nuevo Proyecto" url="#{appBean.basePath}proyecto/mantProyecto.xhtml"/>  
                        </p:submenu>  

                        <p:submenu rendered="#{loginBean.usuario.perfil.modRecursos}" label="Recursos" icon="icon-recursos">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modRubros}"   value="Gestionar Rubros" url="#{appBean.basePath}rubros/rubrosMante.xhtml" icon="icon-rubro"/>      
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modEquiherr}"   value="Gestionar Equipos y Herramientas" url="#{appBean.basePath}equiposherramientas/equipoherramientamant.xhtml" icon="icon-herramienta" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modMateriales}"  value="Gestionar Materiales" url="#{appBean.basePath}materiales/materialmant.xhtml" icon="icon-material"/>  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modManoobra}"  value="Gestionar Mano de Obra" url="#{appBean.basePath}manodeobra/manodeobramant.xhtml" icon="icon-manoobra"/>  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modTransporte}"    value="Gestionar Transporte" url="#{appBean.basePath}transporte/transportemant.xhtml" icon="icon-transporte"/>  
                        </p:submenu>  

                        <p:submenu rendered="#{loginBean.usuario.perfil.modAnalcosto}" label="Analisis de Costos" icon="icon-costo">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modApu}"   value="APU" url="#{appBean.basePath}preciounitario/prueba.xhtml" icon="icon-precio" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modPresup}"   value="Presupuestos" url="#{appBean.basePath}presupuesto/presupuestoMant.xhtml" icon="icon-presupuesto"/>  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modCronograma}"   value="Cronograma Valorado" url="#" icon="icon-cronograma" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modReajprec}"    value="Reajuste de Precios" url="#" icon="icon-reajuste" />  
                        </p:submenu>
                        
                        <p:submenu rendered="#{loginBean.usuario.perfil.modReportes}" label="Reportes Generales" icon="icon-reporte">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modReppartida}" value="Partidas" url="#"  />  
                        </p:submenu>

                        <p:submenu rendered="#{loginBean.usuario.perfil.modSeguridad}" label="Seguridad" icon="icon-seguridad">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modUsuario}" value="Gestion Usuarios" url="#{appBean.basePath}usuarios/usuariomantenimiento.xhtml" icon="icon-user"/>  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modPerfil}" value="Gestion Perfiles" url="#{appBean.basePath}perfiles/perfilmantenimiento.xhtml" icon="icon-perfil"/>  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modRegusu}" value="Registrar Usuario" url="#{appBean.basePath}usuarios/registroUsuarios.xhtml" />  
                        </p:submenu>
                        
                        <p:menuitem value="Cerrar Sesion" actionListener="#{loginBean.cerrarSesion()}" icon="icon-salir" oncomplete="handleLoginRequest(xhr, status, args)" style="margin-right:10px" />  
                        </p:menubar>  

                </h:form>

            </div>

            <div id="content" class="center_content ui-widget-content ui-corner-all">
                <ui:insert name="content"></ui:insert>
            </div>
            <div id="bottom">
                <ui:insert name="bottom">&copy;SISAPU 2014, Derechos Reservados</ui:insert>
            </div>
        </div>
        <script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.loggetOut) {
                    location.href = args.ruta;
                }
            }
        </script>
    </h:body>

</html>
