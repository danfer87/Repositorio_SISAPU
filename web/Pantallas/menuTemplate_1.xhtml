<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="#{appBean.baseUrl}resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="#{appBean.baseUrl}resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <title>Menu Plantilla</title>
        <style type="text/css">
            html{
                height: 100%;
            }
            body{
                height: 80%;
            }
        </style>
    </h:head>

    <h:body>

        <div id="conteiner">
            <div id="top" class="ui-widget-header ui-corner-all">
                <ui:insert name="top">SISAPU-Menu</ui:insert>
            </div >
            <div id="menu">
                <h:form id="frmMenu">  

                    <p:growl id="messages"/>  
                    <p:menubar autoDisplay="false">  
                        <p:submenu rendered="#{loginBean.usuario.perfil.modProyecto}" label="Proyecto" icon="ui-icon-document">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modProyectos}" value="Nuevo Proyecto" url="#" />  
                        </p:submenu>  

                        <p:submenu rendered="#{loginBean.usuario.perfil.modRecursos}" label="Recursos" icon="ui-icon-document">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modRubro}" value="Gestionar Rubros" url="#" />      
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modMateriales}" value="Gestionar Equipos y Herramientas" url="#" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modEquiherr}" value="Gestionar Materiales" url="#" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modManoobra}" value="Gestionar Mano de Obra" url="#" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modTransporte}" value="Gestionar Transporte" url="#" />  
                        </p:submenu>  

                        <p:submenu rendered="#{loginBean.usuario.perfil.modAnalcosto}" label="Analisis de Costos" icon="ui-icon-document">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modApu}" value="Analisis de Precios Unitarios" url="#" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modPresup}" value="Presupuestos" url="#" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modCronograma}" value="Cronograma Valorado" url="#" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modReajprec}" value="Reajuste de Precios" url="#" />  
                        </p:submenu>  

                        <p:submenu rendered="#{loginBean.usuario.perfil.modSeguridad}" label="Seguridad" icon="ui-icon-document">  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modUsuario}" value="Gestion Usuarios" url="#{appBean.basePath}usuarios/usuariomantenimiento.xhtml"  />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modPerfil}" value="Gestion Perfiles" url="#{appBean.basePath}perfiles/perfilmantenimiento.xhtml" />  
                            <p:menuitem rendered="#{loginBean.usuario.perfil.modRegusu}" value="Registro de Usuarios" url="#" />  
                        </p:submenu>
                        <p:menuitem value="Cerrar Sesion" actionListener="#{loginBean.cerrarSesion()}" icon="ui-icon-close" oncomplete="handleLoginRequest(xhr, status, args)" />  
                    </p:menubar>
                    <p:layout style="min-width:400px;min-height:200px;" id="layout">  
                        <p:layoutUnit position="west" resizable="true" size="250" minSize="40" maxSize="250"  header="Modulos" collapsible="true">  
                            <h:form>  
                                <p:growl id="messages" autoUpdate="true"/>  
                                <p:panelMenu style="width:150px">  
                                    <p:submenu rendered="#{loginBean.usuario.perfil.modProyecto}" label="Proyecto">  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modProyectos}" value="Nuevo Proyecto" url="#" />  
                                    </p:submenu>  
                                    <p:separator />
                                    <p:submenu rendered="#{loginBean.usuario.perfil.modRecursos}" label="Recursos" icon="ui-icon-document">  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modRubro}" value="Gestionar Rubros" url="#" />      
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modMateriales}" value="Gestionar Equipos y Herramientas" url="#" />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modEquiherr}" value="Gestionar Materiales" url="#" />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modManoobra}" value="Gestionar Mano de Obra" url="#" />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modTransporte}" value="Gestionar Transporte" url="#" />  
                                    </p:submenu>
                                    <p:separator />
                                    <p:submenu rendered="#{loginBean.usuario.perfil.modAnalcosto}" label="Analisis de Costos" icon="ui-icon-document">  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modApu}" value="Analisis de Precios Unitarios" url="#" />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modPresup}" value="Presupuestos" url="#" />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modCronograma}" value="Cronograma Valorado" url="#" />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modReajprec}" value="Reajuste de Precios" url="#" />  
                                    </p:submenu>
                                    <p:submenu rendered="#{loginBean.usuario.perfil.modSeguridad}" label="Seguridad" icon="ui-icon-document">  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modUsuario}" value="Gestion Usuarios" url="#{appBean.basePath}usuarios/usuariomantenimiento.xhtml"  />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modPerfil}" value="Gestion Perfiles" url="#{appBean.basePath}perfiles/perfilmantenimiento.xhtml" />  
                                        <p:menuitem rendered="#{loginBean.usuario.perfil.modRegusu}" value="Registro de Usuarios" url="#" />  
                                    </p:submenu>
                                    <p:separator />
                                </p:panelMenu>  
                            </h:form>  
                        </p:layoutUnit>  

                        <!---->
                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>
                        
                    </p:layout> 

                </h:form>

            </div>

            <div id="content" class="center_content ui-widget-content ui-corner-all">
                <ui:insert name="content"></ui:insert>
            </div>
            <div id="bottom">
                <ui:insert name="bottom">&copy;SISAPU 2014</ui:insert>
            </div>
        </div>
        <script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.loggetOut) {
                    location.href = args.ruta;
                }
            }
        </script>
    </h:body>

</html>
